<!DOCTYPE HTML PUBLIC>
<html>
<head>
    <title>患者主诉实体链接标注系统</title>
</head>
<body>
    <center>
        <!-- to do: read samples from database -->
        患者问句：医生您好！我的小腹为什么这么疼？
    </center>
    <form name="myForm" id="myForm" onsubmit="return validateForm()">
    </form>
</body>
<script>
    var funcGetSelectText = function(){
        var txt = '';
        if (document.selection){
            txt = document.selection.createRange().text; //ie
        } else {
            txt = document.getSelection();
        }
        return txt.toString();
    }

        
    function del(obj) {
        element = event.srcElement;
        delNode = element.parentNode;
        delNode.remove(element);
    }
    
    var index = 0;
    var container = container || document;
    container.onmouseup = function(){
        var tagName = event.srcElement.tagName;
        if (tagName == "CENTER") {
            var txt = funcGetSelectText();
            if (txt)
            {
                var form = document.getElementById("myForm");
                var li = document.createElement("li");
                form.appendChild(li);
                li.id = index;
                li.innerHTML = txt;

                var btn = document.createElement("button");
                btn.attributes = "nowrap";
                btn.innerHTML = "X";
                btn.id = index;
                btn.setAttribute("onclick", "del(this)");
                
                li.appendChild(btn);

                index = index + 1;
            }
        }
        else if (tagName == "LI") {
            var element = event.srcElement;
            var txt = element.innerHTML;
            var subtxt = funcGetSelectText();
            if (subtxt) {
                txt = txt.replace(subtxt, '<font color="gray">'+subtxt+'</font>');
                element.innerHTML = txt;
            }
        }
    }

    // to do list
    // 1. read knowledge graph, and then,
    //  recommend some candidates for entity linking labelling
    // 2. write labelled result to database
</script>
</html>